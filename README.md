# FEETECH STS UART Text Controller (ESP32)

Cкетч для работы с сервоприводами **FEETECH STS** (например,
STS3215) по шине UART1 на **ESP32**.

Этот проект даёт **один стандартный текстовый протокол**, поверх
которого можно:

1.  Найти сервоприводы на шине (`PING`, `SCAN_ID`)
2.  Задать / изменить ID (`SET_ID`)
3.  Переключить режим работы сервопривода (`SET_SERVO`, `SET_WHEEL`,
    `READ_MODE`)
4.  Управлять сервой:
    -   в позиционном режиме (угол/позиция)
    -   в колёсном режиме (постоянная скорость)
5.  Управлять усилием и читать параметры (нагрузка, напряжение,
    температура)

> ⚠️ Скетч предназначен для **настройки, тестов и обучения**.\
> В рабочих проектах лучше использовать бинарный протокол и избегать
> `String` из-за динамического выделения памяти.

## 1. Схема проекта

ПК → ESP32 → UART переходник → сервоприводы FEETECH STS

![protocol](img/connect.png)

## 2. Аппаратные требования

### 2.1. Аппаратная платформа

-   **Плата:** ESP32
-   **Плата-переходник** для управления сервами
-   **Сервоприводы:** FEETECH серии STS

### 2.2. Подключение

``` cpp
#define S_RXD 18
#define S_TXD 19
#define SERVO_BAUD 1000000
```


## 3. Использование

Открыть Serial Monitor: 115200 бод, перевод строки NL+CR.

После загрузки прошивки выводится список команд.

## 4. Быстрые команды

### Поиск

    SCAN_ID
    PING 100

### ID

    SET_ID 1 100

### SERVO режим

    SET_SERVO 100
    MOVE 100 2048 400 50
    READ_POS 100

### WHEEL режим

    SET_WHEEL 100
    SPEED 100 800
    STOP 100

### Телеметрия

    READ_LOAD 100
    READ_VOLTAGE 100
    READ_TEMP 100
